#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <conio.h>
#include <math.h>
void main()
{
    system("cls");
    int n=4,m=3,i,j,br;
    float det;
    float a[n][m];
    float b[m][m];
    for(i=0;i<n;i++)
    {
        for(j=0;j<m;j++)
        {
            printf("A[%d][%d]= ",i,j);
            scanf("%f",&a[i][j]);
        }
    }
    system("cls");
    ispis_matrice(n,m,a,1);
    getch();
    sabiranje1(n,m,a,1);
    sabiranje1(n,m,a,2);
    sabiranje1(n,m,a,3);
    sabiranje2(n,m,a,2);
    sabiranje2(n,m,a,3);
    sabiranje3(n,m,a,3);
    skracivanje(n,m,a,b);
    system("cls");
    ispis_matrice(m,m,b,2);
    getch();
    system("cls");  
    printf("detB=\t%.2f\t%.2f\t%.2f|%.2f\t%.2f\n     \t%.2f\t%.2f\t%.2f|%.2f\t%.2f\n     \t%.2f\t%.2f\t%.2f|%.2f\t%.2f\n",b[0][0],b[0][1],b[0][2],b[0][0],b[0][1],b[1][0],b[1][1],b[1][2],b[1][0],b[1][1],b[2][0],b[2][1],b[2][2],b[2][0],b[2][1]);
    det=b[0][0]*b[1][1]*b[2][2];
    printf("detB= %.2f\n",det);
    getch();                                                                                           
    system("cls");
    if(b[1][1]==0)
        br=1;
    else
    {
        if(b[2][2]==0)
            br=2;
        else
        {
            br=3;
        }
    }
    if(b[0][0]==0)
        printf("Nemoze da se odredi rang matrice\n");
    else
        printf("Rang matrice je %d\n");
}
void skracivanje(int n,int m,float a[n][m],float b[m][m])
{
    int i,j;
    for(i=0;i<m;i++)
    {
        for(j=0;j<m;j++)
        {
            b[i][j]=a[i][j];
        }
    }
}
void ispis_matrice(int n,int m,float A[n][m],int x)
{
    int i,j;
    if(x==1)
        printf("A=\t");
    else
        printf("B=\t");
    for(i=0;i<n;i++)
    {
        for(j=0;j<m;j++)
        {
            if(A[i][j]==0)
            {
                printf("0\t");
            }
            else
            {
                printf("%.2f\t",A[i][j]);
            }
        }
        printf("\n  \t");
    }
}
void sabiranje1(int n,int m,float a[n][m],int j)
{
    float x,y,z,l;
    int i;
    y=a[j][0];
    z=a[0][0];
    x=y/z;
    x=x*(-1);
    for(i=0;i<m;i++)
    {
        l=a[j][i];
        a[j][i]=l+(a[0][i]*x);
    }
    system("cls");
    ispis_matrice(n,m,a,1);
    getch();
}
void sabiranje2(int n,int m,float a[n][m],int j)
{
    float x,y,z,l;
    int i,xd;
    y=a[j][1];
    z=a[1][1];
    xd=1;
    if(a[2][2]==0)
    {
        z=a[0][2];
        xd=0;
    }
    x=y/z;
    x=x*(-1);
    for(i=0;i<m;i++)
    {
        l=a[j][i];
        a[j][i]=l+(a[xd][i]*x);
    }
    system("cls");
    ispis_matrice(n,m,a,1);
    getch();
}
void sabiranje3(int n,int m,float a[n][m],int j)
{
    float x,y,z,l;
    int i,xd;
    y=a[j][2];
    z=a[2][2];
    xd=2;
    if(a[2][2]==0)
    {
        z=a[0][2];
        xd=0;
    }
    x=y/z;
    x=x*(-1);
    for(i=0;i<m;i++)
    {
        l=a[j][i];
        a[j][i]=l+(a[xd][i]*x);
    }
    system("cls");
    ispis_matrice(n,m,a,1);
    getch();
}
